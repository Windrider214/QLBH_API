@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div class="container-fluid px-4">
<br />
    <div class="row">
        <div class="col-xl-3 col-md-6">
           <div id="tkDoanhThu"></div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div id="tkDonHang"></div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div id="tkSanPham"></div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div id="tkKhachHang"></div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fa fa-bar-chart me-1"></i>
                    Thống kê lợi nhuận
                </div>
                <div class="card-body"><canvas id="chartLoiNhuan" width="100%" height="40"></canvas></div>
            </div>
        </div>
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-area me-1"></i>
                    Area Chart Example
                </div>
                <div class="card-body"><canvas id="myAreaChart" width="100%" height="40"></canvas></div>
            </div>
        </div>

    </div>
</div>


    <script>
        jQuery(document).ready(function ($) {
            tkLoiNhuan();
            TkDoanhThu();
            TkDonHang();
            TkSanPham();
            TkKhachHang();
        });

        var cookieToken = JSON.parse(Common.getCookie("ManagerShop_Cookies"));

        function tkLoiNhuan() {

            $.ajax({
                type: 'POST',
                url: "/Home/ThongKeLoiNhuan",
                data: {},
                contextType: "application/json; charset=utf-8",
                success: function (data) {
                    //    console.log(JSON.parse(data));
                    CreateChart(JSON.parse(data));
                },
                error: function (data) {
                    console.log("error:" + JSON.stringify(data));

                }

            });

            function CreateChart(data) {
                var _data = data;
                var _values = _data.$values;
                var _chartLabels = [];
                var _chartData = [];

                for (i = 0; i < _values.length; i++) {
                    _chartLabels.push(_values[i].tenSp);
                    _chartData.push(_values[i].loiNhuan);
                }

                var barColor = ["red", "green", "blue", "orange", "brown", "purple"];

                new Chart("chartLoiNhuan",
                    {
                        type: "bar",
                        data: {
                            labels: _chartLabels,
                            datasets: [{
                                backgroundColor: barColor,
                                data: _chartData
                            }]
                        },
                        options: {
                            legend: { display: true },
                            title: {
                                display: true,
                                text: 'Lợi nhuận từng mặt hàng'
                            }
                        }
                    });
            };
        }

        function TkDoanhThu() {
            $.ajax({
                type: 'POST',
                url: "/Home/ThongKeDoanhThu",
                data: {},
                success: function (data) {
                    $("#tkDoanhThu").html(data);
                },
                error: function (data) {
                    console.log("error:" + JSON.stringify(data));

                }

            });
        }

        function TkDonHang() {
            $.ajax({
                type: 'POST',
                url: "/Home/ThongKeDonHang",
                data: {},
                success: function (data) {
                    $("#tkDonHang").html(data);
                },
                error: function (data) {
                    console.log("error:" + JSON.stringify(data));

                }

            });
        }

        function TkSanPham() {
            $.ajax({
                type: 'POST',
                url: "/Home/ThongKeSanPham",
                data: {},
                success: function (data) {
                    $("#tkSanPham").html(data);
                },
                error: function (data) {
                    console.log("error:" + JSON.stringify(data));

                }

            });
        }

        function TkKhachHang() {
            $.ajax({
                type: 'POST',
                url: "/Home/ThongKeKhachHang",
                data: {},
                success: function (data) {
                    $("#tkKhachHang").html(data);
                },
                error: function (data) {
                    console.log("error:" + JSON.stringify(data));

                }

            });
        }
    </script>
