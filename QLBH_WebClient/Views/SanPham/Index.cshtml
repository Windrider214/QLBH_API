
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="bg-light py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mb-0"><a href="/TrangChu/Index">Trang Chủ</a> <span class="mx-2 mb-0">/</span> <strong class="text-black">Sản Phẩm</strong></div>
        </div>
    </div>
</div>

<div class="site-section">
    <div class="container">

        <div class="row mb-5">
            <div class="col-md-9 order-2">
                <div class="row">
                    <div class="col-md-12 mb-5">
                        <div class="float-md-left mb-4"><h2 class="text-black h5">Tất cả sản phẩm ( @ViewBag.TotalRow )</h2></div>
                    </div>
                </div>

                <div id="dsSP"> </div>

                <div class="d-flex justify-content-center">
                    <div class="row" data-aos="fade-up">
                        <ul id="pagination-demo" class="pagination-x"></ul>
                    </div>
                </div>
            </div>
            <div class="col-md-3 order-1 mb-5 mb-md-0">
                <div id="dsLSP"></div>

                <div class="border p-4 rounded mb-4">
                    <div id="dsTH"></div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    jQuery(document).ready(function ($) {
        getDsSanPham();
        getDsThuongHieu();
        getDsLoaiSP();
    });

    var pageSize = 6;
    var pageIndex = 1;

    //Lấy sản phẩm
    function getDsSanPham() {

        var inputData = {
            TenSp: "",
            page: pageIndex,
            pageSize: pageSize
        };

        $.ajax({
            type: 'POST',
            url: "/SanPham/PartialSanPham",
            data: inputData,
            success: function (data) {
                $('#dsSP').html(data);
                dataPaging('@ViewBag.TotalRow', function () {
                    getDsSanPham();
                });
            },
            error: function (data) {
                console.log("error:" + JSON.stringify(data));

            }

        });
    }

    //Phân trang
    function dataPaging(totalRow, callback) {

        var totalPage = Math.ceil(totalRow / pageSize);
        $('#pagination-demo').twbsPagination({
            totalPages: totalPage,
            visiblePages: 5,
            first: "Đầu",
            next: "Tiếp",
            last: "Cuối",
            prev: "Trước",
            onPageClick: function (event, page) {
                pageIndex = page;
                setTimeout(callback, 200);
            }
        });
    }

    function getDsLoaiSP() {

        var inputData = {
            TenLoaiSP: ""
        };

        $.ajax({
            type: 'POST',
            url: "/SanPham/PartialLoaiSP",
            data: inputData,
            success: function (data) {
                $('#dsLSP').html(data);
            },
            error: function (data) {
                console.log("error:" + JSON.stringify(data));

            }

        });
    }

    function getDsThuongHieu() {
        var inputData = {
            TenTh: ""
        };

        $.ajax({
            type: 'POST',
            url: "/SanPham/PartialThuongHieu",
            data: inputData,
            success: function (data) {
                $('#dsTH').html(data);
            },
            error: function (data) {
                console.log("error:" + JSON.stringify(data));

            }

        });
    }
</script>
